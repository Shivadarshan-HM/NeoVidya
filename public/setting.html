<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NeoVidya ‚Äì Settings</title>
<meta name="theme-color" content="#0F4C81" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --nv-blue-900:#0F4C81; --nv-blue-700:#0B3A63; --nv-blue-600:#2D9CDB;
    --nv-yellow-500:#F4B400; --nv-green-600:#27AE60; --nv-coral-500:#FF6B6B;
    --bg-dark:#020817; --fg-dark:#E9F2FF; --bg-light:#EAF5FF; --fg-light:#0C1220;
    --glass: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    --radius-2xl:28px; --radius-lg:16px; --shadow-lg:0 12px 32px rgba(7,26,46,.35);
    --font-display:"Poppins",system-ui; --font-body:"Nunito",system-ui;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:var(--font-body);line-height:1.5;min-height:100svh;transition:background .3s,color .3s}
  body.theme-dark{background:radial-gradient(1200px 600px at 50% 120%, #00122a, var(--bg-dark) 60%);color:var(--fg-dark)}
  body.theme-light{background:var(--bg-light);color:var(--fg-light)}
  .wrap{max-width:1100px;margin:auto;padding:clamp(12px,2.6vw,24px);display:grid;gap:16px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:40px;height:40px;border-radius:10px;background:conic-gradient(from 210deg, var(--nv-yellow-500), var(--nv-green-600), var(--nv-blue-600), var(--nv-yellow-500))}
  h1{font-family:var(--font-display);font-size:22px;margin:0}
  .button{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border:0;cursor:pointer;border-radius:12px;font-weight:800;transition:transform .06s ease, filter .2s}
  .button:active{transform:translateY(1px)}
  .primary{background:linear-gradient(180deg, var(--nv-yellow-500), #D99C00);color:#1A1A1A;box-shadow:0 10px 18px rgba(244,180,0,.25)}
  .ghost{background:rgba(255,255,255,.06);color:inherit}
  body.theme-light .ghost{background:#f0f4ff}
  .pill{display:inline-flex;align-items:center;gap:6px;font-size:12px;border-radius:999px;padding:6px 10px;background:rgba(255,255,255,.12)}
  body.theme-light .pill{background:#eef6ff;color:#0B3A63}

  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
  @media (max-width: 980px){ .grid{grid-template-columns:1fr} }
  .card{grid-column:span 6;border-radius:var(--radius-2xl);box-shadow:var(--shadow-lg);padding:16px;background:var(--glass);border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(6px)}
  .card.full{grid-column:1/-1}
  body.theme-light .card{background:#fff;border-color:rgba(0,0,0,.08)}
  .title{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
  .row{display:flex;gap:10px;align-items:center}
  .spaced{display:flex;align-items:center;justify-content:space-between}
  .muted{opacity:.9}
  .sub{font-size:13px;opacity:.9}
  .item{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12);margin-top:8px}
  body.theme-light .item{background:#f9fbff;border-color:#e6eefc}
  .toggle{position:relative;width:56px;height:30px;border-radius:999px;background:rgba(255,255,255,.18);transition:background .2s;border:1px solid rgba(255,255,255,.2)}
  .toggle.on{background:var(--nv-green-600)}
  .knob{position:absolute;top:3px;left:3px;width:24px;height:24px;border-radius:50%;background:#fff;transition:transform .2s}
  .toggle.on .knob{transform:translateX(26px)}
  .select, .text{min-width:210px;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:inherit}
  body.theme-light .select, body.theme-light .text{background:#fff;border-color:rgba(0,0,0,.08)}
  .meter{height:10px;border-radius:999px;background:rgba(255,255,255,.18);overflow:hidden}
  .meter>span{display:block;height:100%;background:linear-gradient(90deg,#F4B400,#2D9CDB)}
  .section{margin-top:8px}
  .code{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; background:rgba(255,255,255,.06); padding:8px 10px; border-radius:8px}
</style>
</head>

<body class="theme-dark">
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>NeoVidya</h1>
          <div class="pill">Settings</div>
        </div>
      </div>
      <div class="row">
        <button id="themeToggle" class="button ghost">üåô Dark</button>
        <button id="backBtn" class="button ghost">‚¨Ö Dashboard</button>
      </div>
    </header>

    <section class="grid">
      <!-- Profile -->
      <article class="card">
        <div class="title"><strong>Profile</strong><span class="muted sub">Name & grade</span></div>
        <div class="item">
          <div><div><strong>Display name</strong></div><div class="sub">Shown on dashboard & certificates</div></div>
          <input id="nameInput" class="text" placeholder="Your name"/>
        </div>
        <div class="item">
          <div><div><strong>Grade</strong></div><div class="sub">Used to tailor content</div></div>
          <select id="gradeSelect" class="select">
            <option>Grade 5</option><option selected>Grade 6</option><option>Grade 7</option><option>Grade 8</option>
          </select>
        </div>
      </article>

      <!-- Language & Theme -->
      <article class="card">
        <div class="title"><strong>Language & Appearance</strong><span class="muted sub">UI language and theme</span></div>
        <div class="item">
          <div><div><strong>Language</strong></div><div class="sub">Translate the app interface</div></div>
          <select id="langSelect" class="select">
            <option value="en">English</option>
            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
            <option value="ka">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
          </select>
        </div>
        <div class="item">
          <div><div><strong>Theme</strong></div><div class="sub">Light or dark</div></div>
          <button id="themeSwap" class="button primary">Toggle Theme</button>
        </div>
        <div class="item">
          <div><div><strong>Text size</strong></div><div class="sub">Increase/decrease font size</div></div>
          <input id="textSize" type="range" min="90" max="120" value="100" />
        </div>
      </article>

      <!-- Notifications (kept) -->
      <article class="card">
        <div class="title"><strong>Notifications</strong><span class="muted sub">Daily reminder to study</span></div>
        <div class="item">
          <div><div><strong>Enable notifications</strong></div><div class="sub">Sends a light reminder (device/local)</div></div>
          <div id="notiToggle" class="toggle"><div class="knob"></div></div>
        </div>
      </article>

      <!-- Data & Storage (Export only; no Import/Clear) -->
      <article class="card full">
        <div class="title"><strong>Data & Storage</strong><span class="muted sub">Works offline. Backup anytime.</span></div>
        <div class="grid" style="grid-template-columns:repeat(12,1fr);gap:12px">
          <div class="item" style="grid-column:span 6">
            <div>
              <div><strong>Local storage used</strong></div>
              <div class="sub">Approximate usage on this device</div>
              <div class="meter" style="margin-top:6px"><span id="storageBar" style="width:0%"></span></div>
            </div>
            <div class="pill" id="storageText">0 KB</div>
          </div>
          <div class="item" style="grid-column:span 6">
            <div><div><strong>Export all data</strong></div><div class="sub">Download a backup (.json)</div></div>
            <button id="exportBtn" class="button primary">‚¨á Export</button>
          </div>
        </div>
        <div class="section sub">Data includes local progress keys like <span class="code">math-lectures-completed</span>, notes per subject, theme, language, etc.</div>
      </article>

      <!-- Connectivity (keep Offline sync only; Data Saver removed) -->
      <article class="card">
        <div class="title"><strong>Connectivity</strong><span class="muted sub">Offline-first</span></div>
        <div class="item">
          <div><div><strong>Offline sync</strong></div><div class="sub">Auto-sync when you go online (placeholder)</div></div>
          <div id="syncToggle" class="toggle"><div class="knob"></div></div>
        </div>
      </article>

      <!-- About -->
      <article class="card">
        <div class="title"><strong>About NeoVidya</strong><span class="muted sub">Version & help</span></div>
        <div class="item">
          <div><div><strong>Version</strong></div><div class="sub">1.0.0 (offline build)</div></div>
          <a class="button ghost" href="#" id="checkUpdate">üîÑ Check</a>
        </div>
        <div class="item">
          <div><div><strong>Help & Support</strong></div><div class="sub">Quick tips and FAQs</div></div>
          <a class="button ghost" href="courses.html">üìö Courses</a>
        </div>
      </article>
    </section>
  </div>

<script>
(function(){
  // ---------- Keys ----------
  const K = {
    THEME:'nv-theme',
    NAME:'nv-name',
    GRADE:'nv-grade',
    LANG:'nv-lang',
    NOTI:'nv-noti',
    TEXTSIZE:'nv-text-size',
    SYNC:'nv-sync'
  };

  // ---------- Theme ----------
  const themeBtn = document.getElementById('themeToggle');
  const themeSwap = document.getElementById('themeSwap');
  const savedTheme = localStorage.getItem(K.THEME) || 'dark';
  setTheme(savedTheme);
  themeBtn.addEventListener('click', ()=> setTheme(isDark()? 'light':'dark'));
  themeSwap.addEventListener('click', ()=> setTheme(isDark()? 'light':'dark'));
  function isDark(){ return document.body.classList.contains('theme-dark'); }
  function setTheme(mode){
    document.body.classList.toggle('theme-dark', mode==='dark');
    document.body.classList.toggle('theme-light', mode==='light');
    themeBtn.textContent = mode==='dark' ? 'üåô Dark' : '‚òÄ Light';
    localStorage.setItem(K.THEME, mode);
    
  }

  // ---------- Profile ----------
  const nameInput = document.getElementById('nameInput');
  const gradeSelect = document.getElementById('gradeSelect');
  nameInput.value = localStorage.getItem(K.NAME) || '';
  gradeSelect.value = localStorage.getItem(K.GRADE) || gradeSelect.value;
  nameInput.addEventListener('input', ()=> localStorage.setItem(K.NAME, nameInput.value));
  gradeSelect.addEventListener('change', ()=> localStorage.setItem(K.GRADE, gradeSelect.value));

  // ---------- Language ----------
  const langSelect = document.getElementById('langSelect');
  langSelect.value = localStorage.getItem(K.LANG) || 'en';
  langSelect.addEventListener('change', ()=>{
    localStorage.setItem(K.LANG, langSelect.value);
    toast('Language saved');
  });

  // ---------- Text size ----------
  const textSize = document.getElementById('textSize');
  const savedSize = parseInt(localStorage.getItem(K.TEXTSIZE) || '100', 10);
  textSize.value = savedSize;
  document.documentElement.style.fontSize = savedSize+'%';
  textSize.addEventListener('input', ()=>{
    document.documentElement.style.fontSize = textSize.value+'%';
    localStorage.setItem(K.TEXTSIZE, textSize.value);
  });

  // ---------- Simple toggle helper ----------
  function initToggle(id, key){
    const el = document.getElementById(id);
    const on = localStorage.getItem(key) === '1';
    el.classList.toggle('on', on);
    el.addEventListener('click', ()=>{
      const newVal = !el.classList.contains('on');
      el.classList.toggle('on', newVal);
      localStorage.setItem(key, newVal ? '1' : '0');
    });
  }
  initToggle('notiToggle', K.NOTI);
  initToggle('syncToggle', K.SYNC);

  // ---------- Storage usage (approx) ----------
  function approxLocalStorageBytes(){
    let bytes=0;
    for(let i=0;i<localStorage.length;i++){
      const k=localStorage.key(i), v=localStorage.getItem(k)||'';
      bytes += k.length + v.length;
    }
    return bytes;
  }
  function formatKB(n){ return (n/1024).toFixed(2)+' KB'; }
  function updateStorageMeter(){
    const used = approxLocalStorageBytes();
    const pct = Math.min(100, Math.round((used / (5*1024*1024)) * 100)); // assume ~5MB quota
    document.getElementById('storageBar').style.width = pct + '%';
    document.getElementById('storageText').textContent = formatKB(used);
  }
  updateStorageMeter();

  // ---------- Export ----------
  document.getElementById('exportBtn').addEventListener('click', ()=>{
    const dump = {};
    for(let i=0;i<localStorage.length;i++){
      const k=localStorage.key(i); dump[k]=localStorage.getItem(k);
    }
    const blob = new Blob([JSON.stringify(dump,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='neovidya-backup.json'; a.click();
    URL.revokeObjectURL(url);
    toast('Backup downloaded');
  });

  // ---------- About ----------
  document.getElementById('checkUpdate').addEventListener('click', (e)=>{
    e.preventDefault();
    toast('You are on the latest offline build ‚úì');
  });

  // ---------- Back ----------
  document.getElementById('backBtn').addEventListener('click', ()=> history.back());

  // ---------- Toast ----------
  let toastTimer;
  function toast(msg){
    let t = document.getElementById('__toast');
    if(!t){
      t = document.createElement('div');
      t.id='__toast';
      t.style.position='fixed'; t.style.left='50%'; t.style.bottom='22px';
      t.style.transform='translateX(-50%)'; t.style.padding='10px 14px';
      t.style.borderRadius='12px'; t.style.zIndex='9999';
      t.style.background='linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06))';
      t.style.border='1px solid rgba(255,255,255,.2)';
      t.style.backdropFilter='blur(6px)';
      t.style.boxShadow='0 10px 24px rgba(0,0,0,.25)';
      document.body.appendChild(t);
    }
    t.textContent = msg;
    t.style.display='block';
    clearTimeout(toastTimer);
    toastTimer = setTimeout(()=>{ t.style.display='none'; }, 1400);
  }
})();
</script>
</body>
</html>